<!doctype html> <html> <head> <meta charset=UTF-8 /> <meta http-equiv=Content-Type content="text/html"/> <title>/code - AsktheRelic.com</title> <link rel=alternate type="application/rss+xml" title="RSS 2.0" href="/code/feed.xml"/> <link rel=stylesheet media=screen href="/stylesheets/code.css"/> <link rel=stylesheet href='/stylesheets/github.css'/> <link rel="shortcut icon" href="/favicon.ico"> <script src="https://code.jquery.com/jquery-1.12.4.js" integrity="sha256-Qw82+bXyGq6MydymqBxNPYTaUXXq7c8v3CwiYwLLNXU=" crossorigin=anonymous></script> <script src="https://code.jquery.com/ui/1.8.24/jquery-ui.min.js" integrity="sha256-UOoxwEUqhp5BSFFwqzyo2Qp4JLmYYPTHB8l+1yhZij8=" crossorigin=anonymous></script> </head> <body> <div id=container> <div id=container2> <div id=container1> <div id=left> <div id=left-header> <h2><a href="/code">/code - a blog</a></h2> </div> <div id=content> <div id=main_block> <div id=prose_block class=post> <a name=storing-command-line-passwords-in-keychain /> <h2 class="blog.post_title"><a href="/2013/03/07/storing-command-line-passwords-in-keychain/">Storing Command Line Passwords In Keychain</a></h2> <small>March 07, 2013 at 10:38 PM</small> <span class=post-prose> <p>Over the last year, I&rsquo;ve made the effort to get most of my passwords into <a href="https://agilebits.com/onepassword">1Password</a>. It&rsquo;s pretty nice to only have to remember one password, along with easily with increasing your overall online security. Whenever another bank or website gets their password list stolen, I&rsquo;m not concerned because my password for that site was &ldquo;0RLrA4GQeGlRZR&rdquo; or some other gibberish that was unique to that specific site.</p> <p>Anyways, I still use a bevy of command line tools that mostly keep their passwords in .cfg files or $ENV variables in my home directory. It&rsquo;s frustrating to have plain text passwords lying around, even if they are just random tokens.</p> <p><a href="https://github.com/PromyLOPh/pianobar">Pianobar</a> is a very cool command line program for playing Pandora songs that gets it right. It supports username and password in its config, but it also supports a <code class=prettyprint>password_command</code> option, which lets another program store your passwords in a secure manner. Hence, I&rsquo;ve wired things up to use the OSX Keychain.</p> <h3>Accessing The Keychain</h3> <p>The main magic is a shell script <code class=prettyprint>get_keychain</code> that uses built-in OSX commands to lookup passwords in the Keychain:</p> <script src="https://gist.github.com/askedrelic/5114346.js"></script> <p>Then <code class=prettyprint>password_command</code> is</p> <div class=highlight><pre class="highlight plaintext"><code>password_command = get_keychain pianobar
</code></pre></div> <p>Which prompts to access my Keychain:</p> <p><span class=aligncenter> <img src="/pic/pianobar-password.png" alt=Pianobar /> </span></p> <h3>Setting Up The Keychain</h3> <p>This is the area I am hoping to improve. 1Password doesn&rsquo;t really have an API for &ldquo;accessing&rdquo; passwords, so I manually entered my pianobar password into the Keychain. Perhaps this would be reason to switch to <a href="http://keepass.info/">KeePass</a>, which I&rsquo;m assuming has an API.</p> <p>I&rsquo;d imagine some sort of Applescript magic could create a Keychain &lt;&gt; 1Password bridge.</p> <h3>Hopefully Good Ideas Spread</h3> <p>Specifically, the <a href="http://docs.python.org/2/distutils/packageindex.html#pypirc">Python .pypirc</a> has frustrated me recently with forcing me to store a clear text password or no password, but there are plenty of programs I would love to switch to not using a read-only config format.</p> <p>Actually, while writing this post, I went digging and found two Python APIs that can read the 1Password database format, which makes the above Keychain bridge unnecessary!</p> <ul> <li><a href="https://github.com/georgebrock/1pass">1pass</a> (Python2)</li> <li><a href="https://github.com/plaguemorin/secret-archer">secret-archer</a> (Python3)</li> </ul> <p>I will have to investigate this 1Password integration further.</p> </span> </div> </div> <div class=hr></div> <div> <h4>Recent Articles</h4> <div class="post frontpage"> <span class=linkdate>05 Feb 2024 »</span> <a href="/2024/02/05/quarterly-calendar-project/">Quarterly Calendar Project</a> </div> <div class="post frontpage"> <span class=linkdate>05 Jan 2024 »</span> <a href="/2024/01/05/joining-recurse-w2-2024/">Joining Recurse Center for W2 2024</a> </div> <div class="post frontpage"> <span class=linkdate>08 Jan 2017 »</span> <a href="/2017/01/08/hosting-with-dokku/">Hosting with Dokku</a> </div> <div class="post frontpage"> <span class=linkdate>18 Sep 2016 »</span> <a href="/2016/09/18/testing-the-layers-of-your-application-at-pyconuk-2016/">Testing the Layers of Your Application at PyConUK 2016</a> </div> <div class="post frontpage"> <span class=linkdate>21 Apr 2014 »</span> <a href="/2014/04/21/upgrading-my-dotfiles-to-symlinks/">Upgrading My Dotfiles To Symlinks</a> </div> <div class="post frontpage"> <span class=linkdate>08 Feb 2014 »</span> <a href="/2014/02/08/another-year-another-set-of-backups/">Another Year, Another Set Of Backups</a> </div> <div class="post frontpage"> <span class=linkdate>02 Dec 2013 »</span> <a href="/2013/12/02/practical-lessons-learned-from-testing/">Practical Lessons Learned From Testing</a> </div> </div> </div> <div class=hr></div> <p id=credits> Powered by <a href="https://middlemanapp.com/">Middleman</a>. <br/> <br/> </p> </div> <div id=right> <div id=right-header> <a href="/"><h1>Ask the Relic</h1></a> </div> </div> </div> </div> </div> </body> </html>