<!doctype html> <html> <head> <meta charset=UTF-8 /> <meta http-equiv=Content-Type content="text/html"/> <title>/code - AsktheRelic.com</title> <link rel=alternate type="application/rss+xml" title="RSS 2.0" href="/code/feed/"/> <link rel=stylesheet media=screen href="/stylesheets/code.css?1455393828"/> <link rel=stylesheet href='/stylesheets/github.css?1455393828'/> <link rel="shortcut icon" href="/favicon.ico"> <script src="/javascripts/jquery-1.5.2.js?1455393828"></script> <script src="/javascripts/jquery.ui.widget-1.8.11.js?1455393828"></script> <script></script> </head> <body> <div id=container> <div id=container2> <div id=container1> <div id=left> <div id=left-header> <h2><a href="/code">/code - a blog</a></h2> </div> <div id=content> <div id=main_block> <div id=prose_block class=post> <a name=toggle-audio-output-from-the-command-line /> <h2 class="blog.post_title"><a href="/2011/03/31/toggle-audio-output-from-the-command-line/">Toggle OSX Audio Output From The Command Line</a></h2> <small>March 31, 2011 at 10:51 PM</small> <span class=post-prose> <p>I spend alot of time at my computer and with that much usage, have both speakers and headphones for different hours of the day. I was initially physically swapping 3.5MM audio output plugs on my speakers, lotsa actual effort! I then figured out I could plug my headphones into the &ldquo;rear&rdquo; speaker output and switch output through the audio control in OSX, much easier! But that was even work, to open the audio panel and chose the correct source, so today I figured out how to toggle sources in Applescript and the command line. I then bound that script to a keypress and now I can toggle audio sources much easier!</p> <p>Since I run a Hackintosh, I am using <a href="http://www.newegg.com/Product/Product.aspx?Item=N82E16813128405">my motherboard&rsquo;s</a> internal audio chipset with 8 channel output, although I&rsquo;m assuming any Mac Pro or MacBook system with multiple audio output sources could use this. Internal speakers is regular out, Line Out is my headphones. Here is my audio panel:</p> <p><span class=aligncenter> <img alt="OSX Audio Panel" src="/pic/audiopanel.png?1455393828"/> </span></p> <p>At the beginning I found <a href="http://rogueamoeba.com/freebies/">SoundSource</a> and a few other menubar options for easily switching audio sources, but they still required work. I searched on Google and StackOverflow, but only found 30-50 line Applescript scripts which just controlled the Audio Panel, which seems klunky to me. The first piece of the puzzle was <a href="http://code.google.com/p/switchaudio-osx/">&ldquo;switchaudio-osx&rdquo;</a> on Google Code which allowed me to control audio sources from the command line. Download the source, which contains a binary <code class=prettyprint>SwitchAudioSource</code>.</p> <p>Basic usage from a command line is to get a list of audio sources, shows your current audio source, and chose a new audio source:</p> <pre class="highlight plaintext"><code>$ SwitchAudioSource -a
Built-in Microphone (input)
Built-in Line Input (input)
Built-in Digital Input (input)
Built-in Output (output)
Built-in Line Output (output)
Built-in Line Output (output)
Built-in Digital Output (output)

$ SwitchAudioSource -c
Built-in Line Output

/$ ./SwitchAudioSource -s "Built-in Line Output"
output audio device set to "Built-in Line Output"
</code></pre> <p>That was enough to do what I wanted from the command line, but to control SwitchAudioSource from a keypress, I used <a href="http://www.shadowlab.org/Software/spark.php">Spark</a>, an open source &ldquo;shortcut manager&rdquo;, which I&rsquo;ve <a href="http://asktherelic.com/2010/04/12/awesome-osx-software/">written about previously</a>. Spark allows to bind anything to custom keypresses. From here, it was figuring out enough Applescript to use SwitchAudioSource to toggle audio sources properly. Simple!</p> <p><span class=aligncenter> <img alt=Spark src="/pic/spark-applescript.png?1455393828"/> </span></p> <p>Code is <a href="https://gist.github.com/897652">here</a> to copy, suit to fit your audio sources and and enjoy!</p> </span> </div> </div> <div class=hr></div> <div> <h4>Recent Articles</h4> <div class="post frontpage"> <span class=linkdate>21 Apr 2014 »</span> <a href="/2014/04/21/upgrading-my-dotfiles-to-symlinks/">Upgrading My Dotfiles To Symlinks</a> </div> <div class="post frontpage"> <span class=linkdate>08 Feb 2014 »</span> <a href="/2014/02/08/another-year-another-set-of-backups/">Another Year, Another Set Of Backups</a> </div> <div class="post frontpage"> <span class=linkdate>02 Dec 2013 »</span> <a href="/2013/12/02/practical-lessons-learned-from-testing/">Practical Lessons Learned From Testing</a> </div> <div class="post frontpage"> <span class=linkdate>20 Nov 2013 »</span> <a href="/2013/11/20/streaming-small-http-responses-with-python/">Streaming Small HTTP Responses with Python</a> </div> <div class="post frontpage"> <span class=linkdate>03 Nov 2013 »</span> <a href="/2013/11/03/an-exploration-in-selecting-things/">An Exploration In Selecting Things</a> </div> <div class="post frontpage"> <span class=linkdate>22 Aug 2013 »</span> <a href="/2013/08/22/the-birthday-surprise/">The Birthday Surprise</a> </div> <div class="post frontpage"> <span class=linkdate>05 Aug 2013 »</span> <a href="/2013/08/05/a-newer-branch/">A Newer Branch</a> </div> </div> </div> <div class=hr></div> <p id=credits> Powered by <a href="http://middlemanapp.com/">Middleman</a>. <br/> <br/> </p> </div> <div id=right> <div id=right-header> <a href="/"><h1>Ask the Relic</h1></a> </div> </div> </div> </div> </div> <script>
  var _gaq = _gaq || [];
  _gaq.push(["_setAccount", "UA-1004202-1"]);
  _gaq.push(["_trackPageview"]);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js?1455393828';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> </body> </html>